# Shopify 跨境税费&物流一体化 App PRD v1.0

## 1. 产品概述

面向中国跨境商家，提供从关税/增值税预估、物流方案对比，到 IOSS/UK VAT/Section 321 等合规申报的一站式 Shopify 插件（以下简称 **DTax‑Bridge**）。通过嵌入购物车与 Checkout Extensibility，在订单确认前给出精准总价与最优国际小包方案，助力商家提升转化率并降低关税/清关风险。

## 2. 市场背景 & 机会

* **现状痛点**：现有工具功能碎片、价格高昂、仅支持英文、缺少物流链路整合，对中国→欧美小包无法覆盖 DDP 及实时政策变动（ICS2、US Section 321 等）。
* **规模**：中国跨境电商商家 > 30 万；欧美消费者对「含税到门」体验需求强烈。
* **机会**：以中国商家视角重构「税费+物流」闭环，差异化切入并整合头程渠道资源。

## 3. 目标用户

| 级别   | 描述                          | 典型指标                     |
| ---- | --------------------------- | ------------------------ |
| 初级卖家 | Shopify 月订单 <1 k，主营快消&3C 小件 | 需要低接入成本、自动 IOSS 申报       |
| 成长卖家 | 1 k–10 k，已有第三方仓储            | 关注 DDP 成本最优及自动 VAT 报表    |
| 头部品牌 | >10 k，拥有多平台渠道               | 关注系统稳定性 & SLA，API 对接 ERP |

## 4. 用户痛点

1. **价格不透明**：买家下单后被追税→退款率高。
2. **语言障碍**：现有 App 仅英文 UI/客服。
3. **流程割裂**：税费计算、物流面单、合规申报分散在多个服务商。
4. **政策变化快**：ICS2、REX、Section 321 等更新，现有工具反应滞后。

## 5. 产品目标 (OKR)

| 目标           | 关键结果                                     |
| ------------ | ---------------------------------------- |
| O1: 提供精准税费预估 | KR1: 覆盖 EU+US ≥ 45 个目的地；KR2: 计算误差 < ±3 % |
| O2: 提升商家转化率  | KR1: 采用商家结账转化率提升 ≥ 6 %；KR2: 退款率降低 ≥ 30 % |
| O3: 省去人工申报成本 | KR1: 自动完成 IOSS/UK VAT 申报占比 ≥ 80 %        |

## 6. 功能需求

### 6.1 税费计算引擎

* 支持 HSCode 解析、商品*价值*阈值判断（Section 321）、VAT / Duty / 消费税计算。
* API 周期性拉取各国税率表，支持手动校正。

### 6.2 物流方案对比

* 聚合 DHL eCom、顺友、燕文、YunExpress 等 10+ 线路。
* 输出 DDP 与 DAP 成本、时效、清关方式。

### 6.3 合规申报自动化

* 集成 IOSS & UK VAT 平台 API；生成月报、自动扣款。
* 支持美国 Section 321 报关批次文件。

### 6.4 结账体验 & 前端组件

* **Cart Banner**：展示含税到门价、预计收货时效。
* **Checkout Block** (Shopify Functions)：切换 DAP/DDP 选项。
* **多语言支持**：中、英、法、德自动切换。

### 6.5 报表 & 监控

* 订单级税费明细，CSV/JSON 导出。
* 计算失败告警（Webhook + 邮件）。

### 6.6 权限与账号

* 支持多店绑定、子账号角色（财务/运营）。

## 7. MVP 范围

| 模块   | MVP 内容                               | 非 MVP          |
| ---- | ------------------------------------ | -------------- |
| 税费计算 | EU 27 & UK VAT、US Duty               | 加拿大 GST、澳洲 GST |
| 物流   | DHLeCom Packet Plus & YunExpress DDP | 海运 FBA 拼箱      |
| 合规   | IOSS/API 导入月报                        | 自动代缴款          |
| 前端   | 中文+英文 Checkout Banner                | 自定义主题组件        |

## 8. 非功能需求

* **性能**：< 300 ms/**请求** @ P95。
* **SLA**：月可用性 ≥ 99.9 %。
* **安全**：符合 GDPR；AES‑256 at rest；OAuth 2.0。
* **可扩展性**：Serverless (AWS Lambda)；水平扩容。

## 9. 技术架构

```
Merchant Storefront → Shopify Functions (Duty & Logistic Extension) → Calculation API (Node.js + TypeScript) → Tax Rules DB (DynamoDB) / Carrier Rate Gateway → Compliance Service (IOSS)
```

* **Admin 面板**：App Bridge + Polaris v12。
* **后台**：NestJS；GraphQL Admin API；Webhook queue (SQS)。

## 10. 集成依赖

| 服务                | 接口                                                 | 说明          |
| ----------------- | -------------------------------------------------- | ----------- |
| Shopify Admin API | Orders, Products, FulfillmentServices              | 获取商品 & 生成面单 |
| DHL eCom API      | rate, label                                        | 需合作 key     |
| EU Tax API        | [https://api.vatsense.eu](https://api.vatsense.eu) | 税率          |

## 11. 商业模式

* **计费层级**：

  * Standard：\$19/月 + 0.25 USD/订单
  * Pro：\$49/月 + 0.15 USD/订单，含 2 k 免费订单
* 15 天免费试用；合作物流返点 2 – 5 %。

## 12. 指标 (Metric)

* 订单含税成功率
* 订单时效达成率
* 计算调用成功率
* 商家留存率 (30/90 day)

## 13. 里程碑 & 时间表

| 阶段           | 产出         | 时间     |
| ------------ | ---------- | ------ |
| 需求冻结         | PRD v1.0   | T+0    |
| 技术方案         | 架构图 & 导入脚本 | T+2 周  |
| 开发冲刺         | 功能代码/MVP   | T+8 周  |
| Beta 内测      | 10 家商家     | T+12 周 |
| App Store 发布 | 公开上线       | T+16 周 |

## 14. 风险与对策

| 风险     | 影响      | 应对                 |
| ------ | ------- | ------------------ |
| 税率变动   | 误差 ↑    | 建立每日自动抓取 & 回测      |
| 物流链路中断 | DDP 不可选 | 预置多渠道，自动 Fail‑over |
| 合规审批延迟 | 上线延期    | 并行推进 税号申请 & 开发     |

## 15. 附录

* 竞品差异矩阵（见 PPT）
* Shopify 官方文档链接
* 税率抓取脚本示例（支持变量路径）

## 16. UED 设计方案 (v2)

> *基于你提供的参考图（Route Engage UI），整体采用 ****左侧垂直导航 + 右侧内容工作区**** 的 SaaS 后台布局，并保持极简、留白、高对比的现代电商后台风格。*

### 16.1 设计基调 & 品牌视觉

| 元素             | 规范                                                 | 参考                  |
| -------------- | -------------------------------------------------- | ------------------- |
| **主色 / Brand** | `#00C9C8` (Teal) —— 突出跨境物流“通达”理念，在侧边栏选中态、主要按钮填充中使用 | 参考图中侧边栏选中高亮色        |
| **辅色 / Info**  | `#006EFF` 用于信息状态与链接；`#FF7A45` 用于警告/异常税费提示          | 维持与 Polaris 色板对比度要求 |
| **背景**         | 主背景 #FFFFFF；侧栏背景 #F9FAFB；工作区卡片使用 #FFFFFF + 2 dp 阴影 | 营造轻盈留白感             |
| **圆角 & 阴影**    | 卡片圆角 8 px，阴影 0 2 4 rgba(0,0,0,0.05)                | 与参考图模块一致            |
| **字体**         | Shopify Sans / 思源黑体 SC，正文 14 px，标题 20 px SemiBold  | 国际化可读性              |

### 16.2 布局框架

```
┌───────────────────────────────────────────────┐
│  SideNav 72 px  │   Workspace (flex:1)                               │
│  Logo           │  ┌──────── TopBar 56 px ─────────┐              │
│  NavItem        │  │ Breadcrumb  |  SecondaryBtns │              │
│  …              │  └──────────────────────────────┘              │
│                 │  ┌─── Content Card  (max‑width 1120 px) ───┐ │
│                 │  │   Primary Action Zone / Forms / Tables   │ │
└─────────────────┴──┴───────────────────────────────────────────┘
```

* **侧边栏（SideNav）**：宽 72 px（展开 220 px），Icon+Label；支持收起。
* **面包屑 TopBar**：固定展示二级路径与操作按钮，保持面包屑→标题→操作的层级清晰。
* **内容卡片**：卡片化容器宽 1120 px 内居中，确保大屏留白统一；移动端断点 < 768 px 满宽。
* **双栏表单**：设置/编辑页采用 240 px 左栏（字段说明）+ 内容表单。
* **预览 Pane**：如参考图所示，在右侧占比 35% 展示手机 Mockup 实时预览。

### 16.3 关键页面升级 — 视觉稿概述

| 页面                 | 版式                               | 升级亮点                                          |
| ------------------ | -------------------------------- | --------------------------------------------- |
| **Dashboard**      | 2 行 3 列 KPI 卡 (8 px 圆角) + 1 行趋势图 | KPI 卡 hover‑lift + subtle shadow；趋势图置于卡内统一风格  |
| **税费设置**           | 双栏表单；左列字段说明以浅灰 #F2F4F5 背景分区      | 『Mini Logo / Cover Image』上传组件跟随参考图样式，展示尺寸要求文本 |
| **物流线路**           | 数据表 + 卡片 Tag                     | 表格前置线路 Logo；每行 hover 显示『Set Default』按钮        |
| **Checkout Block** | 分步向导（Stepper 3 步）                | 步骤圆点采用主色 `#00C9C8`；总价动态数值动画增长                 |
| **报表中心**           | 分组 Tab + 带 Sticky Header 表格      | Sticky Header 阴影 + 月份选择器浮动右侧                  |

### 16.4 组件库指针

* 继承 **Shopify Polaris** 80% 现成组件（Button, Card, DataTable, Modal）。
* 自定义 **Preview Mockup** 组件（SVG 手机壳 + 插槽内容）。
* **NavItem** 图标源于 Lucide React；svg 24 px；选中态主色填充。

### 16.5 交互 & 状态

| 场景  | 细节                                                        |
| --- | --------------------------------------------------------- |
| 悬停  | 卡片与表格行提升 4 dp 阴影，光标指示可点击                                  |
| 选中  | 侧边栏导航圆角矩形填充主色，文本白色；TopBar 按钮 primary 样式                   |
| 骨架屏 | 首次加载展示灰色块 Skeleton；≤ 800 ms 内若加载完成即渐隐                     |
| 动画  | Stepper 数字→对勾切换使用 Scale‑Fade 150 ms；数值增长使用 CountUp 500 ms |

### 16.6 响应式断点

| 设备            | 布局                   | 处理        |
| ------------- | -------------------- | --------- |
| ≥ 1440 px     | 固定内容宽 1120 px，左右均分留白 | 大屏阅读舒适度   |
| 768 – 1439 px | 侧栏可收起，内容区自适应         | 保证元素可点击面积 |
| < 768 px      | 侧栏默认隐藏，使用汉堡菜单；表格横向滚动 | 移动端体验     |

### 16.7 可访问性 (A11y)

* 所有交互控件 ≥ 44 × 44 px。
* 焦点框使用 `outline: 2px solid #00C9C8`。
* 图片上传组件附带 aria‑describedby 显示尺寸要求。

###

> **更新说明**：本节已将 UED 设计全面升级到与参考图一致的简约 SaaS 风格，涵盖颜色、布局、组件、动效及响应式规则。后续如需详细视觉稿或 FE 实现规范，可继续迭代。

